# 要件定義書 - FakeAdAlertDemo Phase 5: デモ用フェイクニュースサイト

## 1. 概要

### 1.1 フェーズ目的

ニュースメディアサイト風のデモ用ページを作成し、フェイクバナー広告をクリックした際にChrome拡張がブロック警告を表示するデモシナリオを実現する。SNSデモ（Phase 1〜4）では「検出・表示」が主だったが、本フェーズでは「クリックブロック」という能動的な保護デモを追加する。

### 1.2 スコープ

| 対象 | 内容 |
|------|------|
| 含む | デモ用静的HTMLページ（フレームワーク・ビルドツール不使用）、バナー広告検出、クリックブロック機能、カスタム警告モーダル、Netlifyデプロイ設定 |
| 含まない | 複数ページ構成、CMS、バックエンド、既存SNS検出ロジックの変更 |

### 1.3 完了条件

- デモサイトがNetlifyで公開されている
- ニュースメディア風の見た目でリアルなフェイク記事が表示される
- フェイクバナー広告（3種）と認証済みバナー広告（1〜2種）が混在表示される
- フェイクバナーに赤い警告オーバーレイが自動表示される
- フェイクバナーをクリックするとカスタム警告モーダルが表示され、遷移がブロックされる
- 認証済みバナーには緑のバッジが表示され、クリックは通常通り動作する
- サイドパネルにVC検証情報がリアルタイム反映される
- 既存のInstagram/TikTok機能にデグレなし

### 1.4 前提条件

- Phase 0〜4が完了していること
- Chrome 114以上
- 既存のVC型定義・モックVC情報をそのまま再利用

---

## 2. 機能要件

### 2.1 デモ用フェイクニュースサイト

**[REQ-P5-001] デモページ基本構成**
- 静的HTML 1ページ構成
- 読売新聞等のニュースメディアサイト風レイアウト
- ヘッダー（サイト名・ナビゲーション）、記事エリア、サイドバーを含む
- リアルな架空ニュース記事を表示する（ダミーテキストは使用しない）
- レスポンシブ対応（デモはPC画面で実施するが基本対応しておく）

**[REQ-P5-002] バナー広告配置**
- フェイクバナー広告を3種類配置する:
  1. **投資詐欺系**: 「月収100万円を実現する方法」等
  2. **なりすまし系**: 有名企業を騙った偽広告（ロゴや名前が微妙に違う）
  3. **情報商材系**: 「LINEで無料講座」「稼ぎ方を教えます」等
- 認証済みバナー広告を1〜2種類配置する:
  - ホワイトリスト企業（トヨタ、ソニー等）の正規バナー風
- バナーはサイドバーや記事間に自然に配置する
- 各バナーは `<a>` タグでリンクを持つ（フェイクは外部詐欺サイト風URL、認証済みは正規URL）

### 2.2 バナー広告検出

**[REQ-P5-003] デモサイト用Content Script**
- デモサイトのURLに対してContent Scriptを動作させる
- ページ内のバナー広告要素を検出する
- 各バナーの広告主名を取得し、既存のverifier（ホワイトリスト/ブラックリスト）で判定する
- 判定結果に応じて:
  - **フェイク**: 赤い警告オーバーレイを表示 + クリックブロック設定
  - **認証済み**: 緑の認証バッジを表示（クリックは通常動作）
- サイドパネルに検出情報を通知する（既存のAD_DETECTEDメッセージ）

### 2.3 クリックブロック

**[REQ-P5-004] フェイクバナーのクリックブロック**
- フェイクと判定されたバナーのクリックイベントを `event.preventDefault()` で阻止する
- クリック時にカスタム警告モーダルを表示する
- ユーザーが明示的に「それでも進む」を選択しない限りナビゲーションしない

**[REQ-P5-005] カスタム警告モーダル**
- ページ全体を暗くする背景オーバーレイ（半透明ブラック）
- 中央に警告モーダルを表示:
  - 警告アイコン（⚠️）
  - タイトル: 「この広告はVC未認証です」
  - 説明: 「この広告にはVerifiable Credentialによる認証がありません。詐欺サイトに誘導される可能性があります。」
  - 検出情報: 広告主名、マッチしたパターン
  - ボタン2つ: 「安全なページに戻る」（推奨）/ 「リスクを理解して進む」
- ダークテーマ + グラスモーフィズムで既存UIと統一
- 「安全なページに戻る」クリックでモーダルを閉じる
- 「リスクを理解して進む」クリックで元のリンク先に遷移する

### 2.4 認証済みバナーの表示

**[REQ-P5-006] 認証済みバナーの緑バッジ**
- ホワイトリストにマッチしたバナーには緑の認証バッジを表示する
- バッジテキスト: 「✅ VeriCerts認証済み」
- クリックは通常通り動作する（ブロックしない）
- サイドパネルにVC検証情報を通知する

---

## 3. 非機能要件

**[NFR-P5-001] デモページ表示速度**
- 静的HTMLのため即座に表示される
- 外部リソース依存を最小限にする（画像はインライン or ローカル）

**[NFR-P5-002] デザイン品質**
- ニュースメディアサイトとして違和感のないデザイン
- フェイク記事がリアルに見えること（デモの説得力に直結）
- バナー広告もリアルな広告に見えること

**[NFR-P5-003] 警告モーダルのデザイン一貫性**
- Phase 3〜4のダークテーマ + グラスモーフィズムと統一
- サイドパネルと同じカラースキームを使用

**[NFR-P5-004] デプロイ容易性**
- Netlifyの無料枠で運用可能
- `demo-site/` ディレクトリをルートに指定するだけでデプロイ完了

---

## 4. 制約事項

**[CON-P5-001] リポジトリ構成**
- `fake-ad-alert-demo/demo-site/` ディレクトリに同居させる
- 拡張機能本体とデモサイトのバージョンを同期させる

**[CON-P5-002] デモサイトURL**
- デプロイ先のURL（例: `https://fake-ad-demo.netlify.app/`）に対してContent Scriptを動作させる
- manifest.jsonの `content_scripts.matches` または `host_permissions` に追加が必要
- ローカル開発時は `localhost` でも動作すること

**[CON-P5-003] 著作権・商標**
- デモサイトの記事は架空の内容とする（実在のニュースをコピーしない）
- バナー広告に実在企業のロゴをそのまま使用しない
- なりすまし系バナーは「それっぽいが明らかに偽物」とわかるデザインにする

---

## 5. UI仕様

### 5.1 デモサイトレイアウト

```
┌─────────────────────────────────────────────────┐
│  📰 デイリーニュース Japan                        │
│  ホーム | 政治 | 経済 | テクノロジー | スポーツ     │
├──────────────────────────┬──────────────────────┤
│                          │ ┌──────────────────┐ │
│  ■ メイン記事             │ │ 🚨 フェイクバナー1 │ │
│  「AIが変える未来の働き方」 │ │  投資詐欺系       │ │
│  記事本文...              │ │  月収100万円...   │ │
│                          │ └──────────────────┘ │
│  ─────────────────────── │                      │
│                          │ ┌──────────────────┐ │
│  ■ サブ記事1              │ │ ✅ 認証済みバナー  │ │
│  「新型EVの販売台数が...」  │ │  トヨタ自動車     │ │
│                          │ └──────────────────┘ │
│  ─────────────────────── │                      │
│                          │ ┌──────────────────┐ │
│  ┌──────────────────────┐│ │ 🚨 フェイクバナー2 │ │
│  │ 🚨 フェイクバナー3     ││ │  なりすまし系     │ │
│  │  記事間の横長バナー    ││ │  偽ソニー広告     │ │
│  │  情報商材系           ││ └──────────────────┘ │
│  └──────────────────────┘│                      │
│                          │                      │
│  ■ サブ記事2              │                      │
│  「2026年の経済展望...」   │                      │
│                          │                      │
├──────────────────────────┴──────────────────────┤
│  © 2026 デイリーニュース Japan（デモ用サイト）      │
└─────────────────────────────────────────────────┘
```

### 5.2 警告モーダル

```
┌─────────────── 背景暗転 ───────────────────────┐
│                                                 │
│    ┌─────────────────────────────────┐          │
│    │                                 │          │
│    │      ⚠️ この広告はVC未認証です    │          │
│    │                                 │          │
│    │  この広告にはVerifiable          │          │
│    │  Credentialによる認証が          │          │
│    │  ありません。                    │          │
│    │  詐欺サイトに誘導される          │          │
│    │  可能性があります。              │          │
│    │                                 │          │
│    │  広告主: 月収100万投資塾         │          │
│    │  判定: ブラックリスト            │          │
│    │                                 │          │
│    │  ┌─────────────────────────┐    │          │
│    │  │  🛡️ 安全なページに戻る    │    │          │
│    │  └─────────────────────────┘    │          │
│    │  ┌─────────────────────────┐    │          │
│    │  │  リスクを理解して進む →    │    │          │
│    │  └─────────────────────────┘    │          │
│    │                                 │          │
│    └─────────────────────────────────┘          │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 5.3 バナー警告オーバーレイ（フェイク）

```
┌──────────────────────────┐
│ ⚠️ 未認証広告            │  ← 赤い半透明オーバーレイ
│                          │
│  [元のバナー画像が       │
│   うっすら見える]         │
│                          │
│  VC認証がありません       │
└──────────────────────────┘
```

### 5.4 バナー認証バッジ（認証済み）

```
┌──────────────────────────┐
│ ✅ VeriCerts認証済み      │  ← 緑の小バッジ（バナー左上）
│                          │
│  [トヨタのバナー広告]      │
│                          │
└──────────────────────────┘
```

### 5.5 カラースキーム

Phase 3〜4と同一。追加分のみ記載。

| 要素 | 色 | 用途 |
|------|-----|------|
| モーダル背景 | rgba(0, 0, 0, 0.7) | 背景暗転 |
| モーダル本体 | #0f0f23 + グラスモーフィズム | 警告モーダル |
| 安全ボタン | #10b981 → #059669 | 推奨アクション |
| 進むボタン | rgba(255, 255, 255, 0.1) | 非推奨アクション |
| バナー警告枠 | rgba(239, 68, 68, 0.3) | フェイクバナーのオーバーレイ |
