# 要件定義書 - FakeAdAlertDemo Phase 3: 仕上げ

## 1. 概要

### 1.1 フェーズ目的

デモ実施に必要な仕上げ作業を行い、営業デモとして完成した状態にする。ポップアップUIでDID/VC検証情報を表示し、share-verifierアプリと統一された世界観を実現する。アイコン、ドキュメント整備、デモ用データの調整も行う。

### 1.2 スコープ

| 対象 | 内容 |
|------|------|
| 含む | ポップアップUI（VC検証情報表示）、アイコン、ドキュメント、デモ用データ調整 |
| 含まない | 新規SNS対応（YouTube等）、統計カウンター機能 |

### 1.3 完了条件

- ツールバーアイコンが適切なデザインで表示される
- ポップアップでDID/VC検証情報が確認できる（share-verifierと同等の項目）
- デモ用の広告主リスト（モックVC情報付き）が調整済み
- 営業デモ実施可能な状態

### 1.4 前提条件

- Phase 0, 1, 2が完了していること
- Instagram, TikTokで広告検出・判定・UI表示が動作すること
- share-verifierアプリのUI/データ構造を参考にすること

---

## 2. 機能要件

### 2.1 ポップアップUI

**[REQ-P3-001] ポップアップ基本レイアウト**
- ツールバーアイコンクリックでポップアップを表示する
- ダークテーマ（`#0f0f23`ベース）+ グラスモーフィズムで統一
- share-verifierと同じ展開可能カード形式を採用する
- 拡張機能名とロゴを表示する

**[REQ-P3-002] 対応SNS・ステータス表示**
- 拡張機能の有効状態を表示する
- 対応しているSNS一覧を表示する（Instagram, TikTok）

**[REQ-P3-003] VC検証情報表示（メイン機能）**
- 直近に検出した広告のVC検証情報を4つの展開可能カードで表示する
- share-verifierと同じ項目構成にする：
  1. **広告情報カード** 📋: 広告主名、広告主DID、カテゴリ、プラットフォーム
  2. **検証ステータスカード** ✓: 署名、有効期限、失効状態、トラストレジストリ、ブロックチェーンの各✓/✗
  3. **信頼チェーンカード** 🔗: 認証局 → 認定代理店 → 広告主 の階層表示
  4. **ブロックチェーン証明カード** ⛓️: ネットワーク、TxHash、コントラクトアドレス
- 広告未検出時は「広告を検出するとここに検証情報が表示されます」を表示する
- フェイク広告検出時は検証失敗状態を表示する

**[REQ-P3-004] デモ用説明テキスト**
- 「これはデモ用アプリです」の説明を表示する
- VeriCertsの簡単な説明を表示する

### 2.2 アイコン

**[REQ-P3-005] 拡張機能アイコン作成**
- 16x16, 48x48, 128x128 のPNGアイコンを作成する
- 警告/シールドをモチーフにしたデザイン
- 視認性の高いシンプルなデザイン

### 2.3 デモ用データ調整

**[REQ-P3-006] ホワイトリスト調整（モックVC情報付き）**
- デモで使いやすい認証済み広告主を追加する
- 各ホワイトリスト企業にモックVC情報（DID、信頼チェーン、ブロックチェーン証明）を紐づける
- share-verifierのデータ構造と一致させる

**[REQ-P3-007] ブラックリスト調整**
- デモで効果的なフェイク広告パターンを追加する
- 実際の詐欺広告に見られるパターンを追加する

### 2.4 ドキュメント整備

**[REQ-P3-008] README.md更新**
- プロジェクト概要（Phase 1, 2完了を反映）
- インストール方法
- 使い方
- デモ実施ガイド

**[REQ-P3-009] デモ手順書**
- 営業デモ用のステップバイステップガイド
- トラブルシューティング

---

## 3. 非機能要件

**[NFR-P3-001] デザイン品質**
- share-verifierと統一されたダークテーマ + グラスモーフィズム
- 展開可能カードのUI/UXパターンを共通化
- プロフェッショナルな営業デモに適した品質

**[NFR-P3-002] ポップアップ表示速度**
- ポップアップは即座に（500ms以内）表示される

**[NFR-P3-003] share-verifierとの一貫性**
- 表示項目（検証ステータス、信頼チェーン、ブロックチェーン証明）がshare-verifierと同じ
- カラースキーム、カードデザイン、アイコン使用がshare-verifierと統一

---

## 4. 制約事項

**[CON-P3-001] デモ専用**
- VC検証情報はモックデータ（実際のVC検証は行わない）
- 設定変更機能は不要（デモ用のため）

**[CON-P3-002] アイコン作成**
- プロのデザイナーを使わない場合、シンプルなデザインでOK

---

## 5. UI仕様

### 5.1 ポップアップレイアウト

```
┌─────────────────────────────────┐
│  🛡️ FakeAdAlertDemo             │ ← ダークテーマ (#0f0f23)
│  ───────────────────────────    │
│  ✅ 拡張機能は有効              │
│  📸 Instagram  ✓  🎵 TikTok  ✓ │
│  ───────────────────────────    │
│                                 │
│  直近の検出広告:                 │
│                                 │
│  ▶ 📋 広告情報                  │ ← 展開可能カード
│    広告主: ソニー               │
│    広告主DID: did:web:sony...   │
│    プラットフォーム: Instagram    │
│    カテゴリ: 商品広告            │
│                                 │
│  ▶ ✓ 検証ステータス             │ ← 展開可能カード
│    発行者の署名       ✓         │
│    有効期限           ✓         │
│    失効状態           ✓         │
│    トラストレジストリ  ✓         │
│    ブロックチェーン    ✓         │
│                                 │
│  ▶ 🔗 信頼チェーン             │ ← 展開可能カード
│    消費者庁                      │
│      ↓                          │
│    認定広告代理店                │
│      ↓                          │
│    ソニー                       │
│                                 │
│  ▶ ⛓️ ブロックチェーン証明      │ ← 展開可能カード
│    Network: Sepolia             │
│    TxHash: 0xabc...def         │
│    Contract: 0x123...456       │
│                                 │
│  ───────────────────────────    │
│  ⚠️ デモ用アプリです            │
│  VeriCerts認証コンセプトデモ     │
└─────────────────────────────────┘
```

### 5.2 フェイク広告検出時

```
┌─────────────────────────────────┐
│  🛡️ FakeAdAlertDemo             │
│  ───────────────────────────    │
│  ✅ 拡張機能は有効              │
│  📸 Instagram  ✓  🎵 TikTok  ✓ │
│  ───────────────────────────    │
│                                 │
│  ⚠️ フェイク広告の可能性        │ ← 赤グラデーション
│                                 │
│  有効なVCが見つかりませんでした  │
│                                 │
│  広告主: horie_enjougun         │
│  プラットフォーム: TikTok        │
│  マッチパターン: なりすまし系    │
│                                 │
│  ───────────────────────────    │
│  ⚠️ デモ用アプリです            │
└─────────────────────────────────┘
```

### 5.3 未検出時

```
┌─────────────────────────────────┐
│  🛡️ FakeAdAlertDemo             │
│  ───────────────────────────    │
│  ✅ 拡張機能は有効              │
│  📸 Instagram  ✓  🎵 TikTok  ✓ │
│  ───────────────────────────    │
│                                 │
│  ℹ️ 広告未検出                  │
│                                 │
│  SNSページで広告を検出すると    │
│  ここにVC検証情報が             │
│  表示されます                   │
│                                 │
│  ───────────────────────────    │
│  ⚠️ デモ用アプリです            │
└─────────────────────────────────┘
```

### 5.4 カラースキーム

| 要素 | 色 | 用途 |
|------|-----|------|
| Background | #0f0f23 | ポップアップ背景 |
| Card BG | rgba(255,255,255,0.1) | グラスモーフィズムカード |
| Card Border | rgba(255,255,255,0.2) | カード境界線 |
| Primary | #0ea5e9 | VeriCertsブランド、アクセント |
| Accent Cyan | #00d4ff | DID/コード表示 |
| Success | #10b981 / #4ade80 | 認証済み、✓マーク |
| Danger | #ef4444 / #f87171 | フェイク、✗マーク |
| Text Primary | #ffffff | メインテキスト |
| Text Muted | rgba(255,255,255,0.6) | サブテキスト、ラベル |
